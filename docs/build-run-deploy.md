## How to start an extraction?

`news-extractor` is deployed on Google Kubernetes Engine and can be interacted with by REST API means. The current deployment endpoint is `34.123.31.244:8080` and is subject to change if the service is redeployed.

To start a job, an example command like the one below can be used:

```bash
URL="http://g4media.ro"
SITE_MAP_PATH="./newsfeel-maps/selectors/g4media.yaml"
NEWS_EXTRACTOR_ENDPOINT="34.123.31.244:8080"
curl -X POST -d "url=${URL}&siteMapPath=${SITE_MAP_PATH}" "${NEWS_EXTRACTOR_ENDPOINT}/start"
```

## How to deploy the news-extractor?

First, we need to create the container. This is automated by pushing a tag to the remote repository. Example commands:

```bash
git tag v0.2.0
git push origin tag
```

An GitHub action is started as a consequence that publishes the container to Google Container Registry.
Once the container is published, we must go to GKE console -> Workloads -> news-extractor -> Edit -> Go to `containers:` section and modify the image source -> Go to `matchLabels` and change the version number with the correspondent deployed container version -> hit Save and wait for the magic to happen.

