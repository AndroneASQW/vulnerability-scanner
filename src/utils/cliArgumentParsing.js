const yargs = require('yargs/yargs');
const { hideBin } = require('yargs/helpers');

function parseRunScriptArguments() {
    return yargs(hideBin(process.argv))
        .command('extract [url] [siteMap]', 
        'Extract data using given url', (yargs) => {
            return yargs
                .option('url', {
                    describe: 'Url to extract data from.',
                    demandOption : true,
                })
                .option('map', {
                    describe: 'Path to the map type used in extraction.',
                    demandOption : true,
                })
                .option('output', {
                    alias: 'o',
                    describe: 'Path to output directory',
                    default: './output/'
                })
                .option('nf-service', {
                    describe: 'Url to a NewsFeelService endpoint',
                })
                .option('log-file', {
                    description: 'Path to log file',
                    default: './extractor.log'
                })
                .option('abp-path', {
                    description: 'Path to AdblockPlus instance',
                    default: './node_modules/newsfeel-browser/abp-3.12/'
                })
                .option('chrome-profile', {
                    description: 'Path to a chrome profile',
                    default: './chrome_profile'
                })
                .help('h')
        })
        .command('follow-links-extract [url] [siteMap] [propsFile]',
        'Extract data from followed links ', (yargs) => {
            return yargs
                .option('url', {
                    describe: 'Url to extract data from.',
                    demandOption : true,
                })
                .option('map', {
                    describe: 'Path to the map type used in extraction.',
                    demandOption : true,
                })
                .option('props', {
                    alias: 'p',
                    describe: 'Path to property file.',
                    default: './extractor.properties'
                })
                .option('log-file', {
                    description: 'Path to log file',
                    default: './extractor.log'
                })
                .option('abp-path', {
                    description: 'Path to AdblockPlus instance',
                    default: './node_modules/newsfeel-browser/abp-3.12/'
                })
                .option('chrome-profile', {
                    description: 'Path to a chrome profile',
                    default: './chrome_profile'
                })
                .help('h')
        }).parse();
}

module.exports = {parseRunScriptArguments};
